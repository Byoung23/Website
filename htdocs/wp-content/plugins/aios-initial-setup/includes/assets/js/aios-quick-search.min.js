!function(e){e(document).ready(function(){e(document);var t=e(window),a=e("select.qs-select"),l=e("select.qs-select-single");t.on("load",function(){a.each(function(t,a){var l=e(a).attr("id");!function(t,a){var l=t.attr("title"),i=new Array,s=""==l?"value":l;"string"==typeof a&&(a.search("city")>-1&&i.push("city"),a.search("zip")>-1&&i.push("ZIP"),a.search("neighborhood")>-1&&i.push("Neighborhood"),a.search("mlsarea")>-1&&i.push("MLS Area"),2==i.length&&(s=i.join(" or ")),i.length>2&&(s=i.join(", "),lastCommaIndex=s.lastIndexOf(","),acceptedValuesText1=s.slice(0,lastCommaIndex),acceptedValuesText2=s.slice(lastCommaIndex,s.length),acceptedValuesText2=acceptedValuesText2.replace(",",", or"),s=acceptedValuesText1+acceptedValuesText2),s=s.replace("Select a","")),null!=t.attr("data-status-placeholder")&&(s=t.attr("data-status-placeholder"));var d=t.parents("form"),n=t,r={ajax:{url:aios_qs_ajax,type:"POST",dataType:"json",data:{fieldname:a,q:"{{{q}}}"}},locale:{errorText:"Error retrieving results.",statusInitialized:"Start typing a "+s+".",statusNoResults:"The "+s+" not found.",searchPlaceholder:"",statusSearching:"Looking for "+s+"..."},preserveSelectedPosition:"before",preprocessData:function(t){var a=t.length,l=[];if(a)for(var i=0;i<=t.length-1;i++)l.push(e.extend(!0,t[i],{text:t[i].text,value:t[i].value,data:{type:t[i].type,subtext:t[i].remarks}}));return l}};d.length&&n.length&&(n.selectpicker({liveSearch:!0}).ajaxSelectPicker(r),n.on("hidden.bs.select",function(t,a,l,i){e(".city-zip-fields").remove(),$d=e(this),$d.find("option:selected").each(function(){$dd=e(this),$field_type=$dd.data("type"),$field_value=$dd.val(),"listingIdList"==$field_type?(mlsIdField=d.find("input[name=listingIdList]"),mlsIdField.length>0?mlsIdField.val(mlsIdField.val()+","+$field_value):d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">')):"street"==$field_type?(d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">'),d.prepend('<input type="hidden" class="city-zip-fields" name="streetNumber" value=" ">')):d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">')})}))}(e(a),l)}),l.each(function(){e(this).selectpicker()})})})}(jQuery);