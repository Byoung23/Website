!function(e){e(document).ready(function(){e(document);var t=e(window),a=e("select.qs-select"),i=e("select.qs-select-single");t.on("load",function(){a.each(function(t,a){var i=e(a).attr("id");!function(t,a){var i=t.attr("title"),l=new Array,s=""==i?"value":i;"string"==typeof a&&(a.search("city")>-1&&l.push("city"),a.search("zip")>-1&&l.push("ZIP"),a.search("neighborhood")>-1&&l.push("Neighborhood"),a.search("mlsarea")>-1&&l.push("MLS Area"),2==l.length&&(s=l.join(" or ")),l.length>2&&(s=l.join(", "),lastCommaIndex=s.lastIndexOf(","),acceptedValuesText1=s.slice(0,lastCommaIndex),acceptedValuesText2=s.slice(lastCommaIndex,s.length),acceptedValuesText2=acceptedValuesText2.replace(",",", or"),s=acceptedValuesText1+acceptedValuesText2));var d=t.parents("form"),n=t,c={ajax:{url:aios_qs_ajax,type:"POST",dataType:"json",data:{fieldname:a,q:"{{{q}}}"}},locale:{errorText:"Error retrieving results.",statusInitialized:"Start typing a "+s+".",statusNoResults:"The "+s+" not found.",searchPlaceholder:"",statusSearching:"Looking for "+s+"..."},preserveSelectedPosition:"before",preprocessData:function(t){var a=t.length,i=[];if(a)for(var l=0;l<=t.length-1;l++)i.push(e.extend(!0,t[l],{text:t[l].text,value:t[l].value,data:{type:t[l].type,subtext:t[l].remarks}}));return i}};d.length&&n.length&&(n.selectpicker({liveSearch:!0}).ajaxSelectPicker(c),n.on("hidden.bs.select",function(t,a,i,l){e(".city-zip-fields").remove(),$d=e(this),$d.find("option:selected").each(function(){$dd=e(this),$field_type=$dd.data("type"),$field_value=$dd.val(),"listingIdList"==$field_type?(mlsIdField=d.find("input[name=listingIdList]"),mlsIdField.length>0?mlsIdField.val(mlsIdField.val()+","+$field_value):d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">')):"street"==$field_type?(d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">'),d.prepend('<input type="hidden" class="city-zip-fields" name="streetNumber" value=" ">')):d.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">')})}))}(e(a),i)}),i.each(function(){e(this).selectpicker()})})})}(jQuery);