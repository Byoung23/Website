!function(t){t(document).ready(function(){var a=t(".aios-s3-wrap"),s=t(".s3-loading"),n=t("input[name=access-lvl]"),e=t(".s3-response-message");a.on("keypress",".access-lvl",function(a){if(13==a.which)return t(".confirm-access-lvl").trigger("click"),!1}),a.on("click",".confirm-access-lvl",function(a){a.preventDefault(),s.addClass("show-icon"),async function(){let t=await fetch("https://resources.agentimage.com/admin/uri/reference.json");return await t.json()}().then(a=>{t.ajax({type:"POST",url:a.api["aios-resources"],data:{token:n.val()},success:function(a){"Access Denied!"==JSON.parse(a)?(e.stop(!0,!0).fadeIn(),n.val("").focus(),s.removeClass("show-icon")):(e.stop(!0,!0).fadeOut(),t.post(ajaxurl,{action:"set_access_session",access_details:JSON.parse(a)},function(t,a,s){var n=new Date;n.setTime(n.getTime()+9e5),expires="; expires="+n.toUTCString(),document.cookie="wordpress_QWdlbnRJbWFnZQ=TmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVt"+encodeURIComponent(t)+expires+"; path=/",setTimeout(function(){location.reload()},2e3)}))}})}).catch(t=>{console.log(t.message)})}),window.location.hash&&(t(".tab-button-wrap .tab-button").removeClass("active"),t(".tab-content-wrap .tab-content").removeClass("active"),t('.tab-button-wrap .tab-button[data-link="'+window.location.hash.split("#").join("")+'"]').addClass("active"),t(".tab-content-wrap .tab-content."+window.location.hash.split("#").join("")).addClass("active")),t(".tab-button-wrap").on("click",".tab-button",function(a){a.stopPropagation(),a.preventDefault(),t(".tab-button").removeClass("active"),t(this).addClass("active"),$button_content_area=t(this).data("link"),window.location.hash=$button_content_area,t(".tab-content-wrap .tab-content").removeClass("active").hide(),t(".tab-content-wrap").find("."+$button_content_area).show()}),a.on("click",'button[is-button="update"]',function(){var a=t(this),s=a.attr("bucket"),n=a.attr("parentfile"),e=a.attr("version");if(a.attr("is-button","installing").text("Installing..."),t(this).parents(".tab-plugins").length)var i="Plugins";else var i="Themes";t.post(ajaxurl,{action:"update_resources",awslink:s,parentfile:n,is_file:i},function(t,s,n){var i=JSON.parse(t);"Plugin Activated"==i[0]?(a.attr("is-button","not-activate").text("Success"),setTimeout(function(){a.parents("tr.aios-inactive").length?a.attr("is-button","not-activate").html('<span class="dashicons dashicons-migrate"></span> <span>Activate</span>'):a.attr("is-button","deactivate").html('<span class="dashicons dashicons-minus"></span> <span>Deactivate</span></button>'),a.parents("tr").find(".plugin-version-author-uri").html("Version "+e)},2e3)):a.attr("is-button","not-error").text(i[0])})}),a.on("click",'button[is-button="not-activate"]',function(){var a=t(this),s=a.attr("parentfile");if(a.attr("is-button","activating").text("Activating..."),t(this).parents(".tab-plugins").length)var n="Plugins";else var n="Themes";t.post(ajaxurl,{action:"activate_files",parentfile:s,is_file:n},function(t){var s=JSON.parse(t);"Activated"==s[0]&&(a.attr("is-button","up-to-date").attr("disabled","disabled").html('<span class="dashicons dashicons-yes"></span> <span>Activation Complete</span>'),a.parents("tr.aios-inactive ").removeClass("aios-inactive").addClass("aios-active"),setTimeout(function(){a.attr("is-button","deactivate").removeAttr("disabled").html('<span class="dashicons dashicons-minus"></span> <span>Deactivate</span></button>')},2e3),location.reload())})}),a.on("click",'button[is-button="deactivate"]',function(){var a=t(this),s=a.attr("parentfile");a.attr("is-button","deactivating").text("Deactivating..."),t.post(ajaxurl,{action:"deactivate_files",parentfile:s},function(t){var s=JSON.parse(t);"Deactivated"==s[0]&&(a.attr("is-button","deactivated").attr("disabled","disabled").html('<span class="dashicons dashicons-yes"></span> <span>Deactivation Complete</span>'),a.parents("tr.aios-active").removeClass("aios-active").addClass("aios-inactive"),setTimeout(function(){a.attr("is-button","not-activate").removeAttr("disabled").html('<span class="dashicons dashicons-migrate"></span> <span>Activate</span>')},2e3),location.reload())})}),a.on("click",'button[is-button="download"]',function(){var a=t(this),s=a.attr("bucket");if(a.attr("is-button","installing").html('<span class="dashicons dashicons-hammer"></span> <span>Installing...</span>'),t(this).parents(".tab-plugins").length)var n="Plugins";else var n="Themes";t.post(ajaxurl,{action:"download_files",awslink:s,is_file:n},function(t,s,e){var i=JSON.parse(t);"Plugins"==n?"Successfully unzipped the file!"==i[0]?(a.attr("is-button","not-activate").text("Success"),setTimeout(function(){a.html('<span class="dashicons dashicons-migrate"></span> <span>Activate</span>')},2e3)):a.attr("is-button","not-error").text(i[0]):"Successfully unzipped the file!"==i[0]?(a.attr("is-button","not-activate").text("Success"),setTimeout(function(){a.parent().html('<span style="color:green">Latest Version!<span>'),a.remove(),location.reload()},2e3)):a.attr("is-button","not-error").text(i[0])})})})}(jQuery);
